include 'win32a.inc'
ID_MAIN           = 100
ID_EXE_ICON       = 101
ID_EXE_ICONS      = 102
ID_GUI_STRINGS    = 103
ID_GUI_BINDERS    = 104
IDR_EAX_NAME      = 200
IDR_EBX_NAME      = 201
IDR_ECX_NAME      = 202
IDR_EDX_NAME      = 203
IDR_ESP_NAME      = 204
IDR_EBP_NAME      = 205
IDR_ESI_NAME      = 206
IDR_EDI_NAME      = 207
IDR_MM0_NAME      = 208
IDR_MM1_NAME      = 209
IDR_MM2_NAME      = 210
IDR_MM3_NAME      = 211
IDR_MM4_NAME      = 212
IDR_MM5_NAME      = 213
IDR_MM6_NAME      = 214
IDR_MM7_NAME      = 215
IDR_K0_NAME       = 216
IDR_K1_NAME       = 217
IDR_K2_NAME       = 218
IDR_K3_NAME       = 219
IDR_K4_NAME       = 220
IDR_K5_NAME       = 221
IDR_K6_NAME       = 222
IDR_K7_NAME       = 223
IDR_ZMM0_NAME     = 300
IDR_ZMM1_NAME     = 301
IDR_ZMM2_NAME     = 302
IDR_ZMM3_NAME     = 303
IDR_ZMM4_NAME     = 304
IDR_ZMM5_NAME     = 305
IDR_ZMM6_NAME     = 306
IDR_ZMM7_NAME     = 307
IDR_EAX_VALUE     = 400
IDR_EBX_VALUE     = 401
IDR_ECX_VALUE     = 402
IDR_EDX_VALUE     = 403
IDR_ESP_VALUE     = 404
IDR_EBP_VALUE     = 405
IDR_ESI_VALUE     = 406
IDR_EDI_VALUE     = 407
IDR_MM0_VALUE     = 408
IDR_MM1_VALUE     = 409
IDR_MM2_VALUE     = 410
IDR_MM3_VALUE     = 411
IDR_MM4_VALUE     = 412
IDR_MM5_VALUE     = 413
IDR_MM6_VALUE     = 414
IDR_MM7_VALUE     = 415
IDR_ZMM0_0_VALUE  = 500
IDR_ZMM0_1_VALUE  = 501
IDR_ZMM0_2_VALUE  = 502
IDR_ZMM0_3_VALUE  = 503
IDR_ZMM0_4_VALUE  = 504
IDR_ZMM0_5_VALUE  = 505
IDR_ZMM0_6_VALUE  = 506
IDR_ZMM0_7_VALUE  = 507
IDR_ZMM1_0_VALUE  = 508 
IDR_ZMM1_1_VALUE  = 509 
IDR_ZMM1_2_VALUE  = 510 
IDR_ZMM1_3_VALUE  = 511 
IDR_ZMM1_4_VALUE  = 512 
IDR_ZMM1_5_VALUE  = 513 
IDR_ZMM1_6_VALUE  = 514 
IDR_ZMM1_7_VALUE  = 515 
IDR_ZMM2_0_VALUE  = 516 
IDR_ZMM2_1_VALUE  = 517 
IDR_ZMM2_2_VALUE  = 518 
IDR_ZMM2_3_VALUE  = 519 
IDR_ZMM2_4_VALUE  = 520 
IDR_ZMM2_5_VALUE  = 521 
IDR_ZMM2_6_VALUE  = 522 
IDR_ZMM2_7_VALUE  = 523 
IDR_ZMM3_0_VALUE  = 524 
IDR_ZMM3_1_VALUE  = 525 
IDR_ZMM3_2_VALUE  = 526 
IDR_ZMM3_3_VALUE  = 527 
IDR_ZMM3_4_VALUE  = 528 
IDR_ZMM3_5_VALUE  = 529 
IDR_ZMM3_6_VALUE  = 530 
IDR_ZMM3_7_VALUE  = 531 
IDR_ZMM4_0_VALUE  = 532
IDR_ZMM4_1_VALUE  = 533 
IDR_ZMM4_2_VALUE  = 534 
IDR_ZMM4_3_VALUE  = 535 
IDR_ZMM4_4_VALUE  = 536 
IDR_ZMM4_5_VALUE  = 537 
IDR_ZMM4_6_VALUE  = 538 
IDR_ZMM4_7_VALUE  = 539 
IDR_ZMM5_0_VALUE  = 540 
IDR_ZMM5_1_VALUE  = 541 
IDR_ZMM5_2_VALUE  = 542 
IDR_ZMM5_3_VALUE  = 543 
IDR_ZMM5_4_VALUE  = 544 
IDR_ZMM5_5_VALUE  = 545 
IDR_ZMM5_6_VALUE  = 546 
IDR_ZMM5_7_VALUE  = 547 
IDR_ZMM6_0_VALUE  = 548 
IDR_ZMM6_1_VALUE  = 549 
IDR_ZMM6_2_VALUE  = 550 
IDR_ZMM6_3_VALUE  = 551 
IDR_ZMM6_4_VALUE  = 552 
IDR_ZMM6_5_VALUE  = 553 
IDR_ZMM6_6_VALUE  = 554 
IDR_ZMM6_7_VALUE  = 555 
IDR_ZMM7_0_VALUE  = 556 
IDR_ZMM7_1_VALUE  = 557 
IDR_ZMM7_2_VALUE  = 558 
IDR_ZMM7_3_VALUE  = 559 
IDR_ZMM7_4_VALUE  = 560 
IDR_ZMM7_5_VALUE  = 561 
IDR_ZMM7_6_VALUE  = 562 
IDR_ZMM7_7_VALUE  = 563 
IDR_K0_VALUE      = 900
IDR_K1_VALUE      = 901
IDR_K2_VALUE      = 902
IDR_K3_VALUE      = 903
IDR_K4_VALUE      = 904
IDR_K5_VALUE      = 905
IDR_K6_VALUE      = 906
IDR_K7_VALUE      = 907
STRING_APP        = 0
STRING_EAX        = 1
STRING_EBX        = 2
STRING_ECX        = 3
STRING_EDX        = 4
STRING_ESP        = 5
STRING_EBP        = 6
STRING_ESI        = 7
STRING_EDI        = 8
STRING_MM         = 9
STRING_ZMM        = 10
STRING_K          = 11
BUFFER_EAX        = TEXT_PER_REG * 0
BUFFER_EBX        = TEXT_PER_REG * 1
BUFFER_ECX        = TEXT_PER_REG * 2
BUFFER_EDX        = TEXT_PER_REG * 3
BUFFER_ESP        = TEXT_PER_REG * 4
BUFFER_EBP        = TEXT_PER_REG * 5
BUFFER_ESI        = TEXT_PER_REG * 6
BUFFER_EDI        = TEXT_PER_REG * 7
BUFFER_MM0        = TEXT_PER_REG * 8
BUFFER_MM1        = TEXT_PER_REG * 9
BUFFER_MM2        = TEXT_PER_REG * 10
BUFFER_MM3        = TEXT_PER_REG * 11
BUFFER_MM4        = TEXT_PER_REG * 12
BUFFER_MM5        = TEXT_PER_REG * 13
BUFFER_MM6        = TEXT_PER_REG * 14
BUFFER_MM7        = TEXT_PER_REG * 15
BUFFER_ZMM0_0     = TEXT_PER_REG * 16
BUFFER_ZMM0_1     = TEXT_PER_REG * 17
BUFFER_ZMM0_2     = TEXT_PER_REG * 18
BUFFER_ZMM0_3     = TEXT_PER_REG * 19
BUFFER_ZMM0_4     = TEXT_PER_REG * 20
BUFFER_ZMM0_5     = TEXT_PER_REG * 21
BUFFER_ZMM0_6     = TEXT_PER_REG * 22
BUFFER_ZMM0_7     = TEXT_PER_REG * 23
BUFFER_ZMM1_0     = TEXT_PER_REG * 24
BUFFER_ZMM1_1     = TEXT_PER_REG * 25
BUFFER_ZMM1_2     = TEXT_PER_REG * 26
BUFFER_ZMM1_3     = TEXT_PER_REG * 27
BUFFER_ZMM1_4     = TEXT_PER_REG * 28
BUFFER_ZMM1_5     = TEXT_PER_REG * 29
BUFFER_ZMM1_6     = TEXT_PER_REG * 30
BUFFER_ZMM1_7     = TEXT_PER_REG * 31
BUFFER_ZMM2_0     = TEXT_PER_REG * 32
BUFFER_ZMM2_1     = TEXT_PER_REG * 33
BUFFER_ZMM2_2     = TEXT_PER_REG * 34
BUFFER_ZMM2_3     = TEXT_PER_REG * 35
BUFFER_ZMM2_4     = TEXT_PER_REG * 36
BUFFER_ZMM2_5     = TEXT_PER_REG * 37
BUFFER_ZMM2_6     = TEXT_PER_REG * 38
BUFFER_ZMM2_7     = TEXT_PER_REG * 39
BUFFER_ZMM3_0     = TEXT_PER_REG * 40
BUFFER_ZMM3_1     = TEXT_PER_REG * 41
BUFFER_ZMM3_2     = TEXT_PER_REG * 42
BUFFER_ZMM3_3     = TEXT_PER_REG * 43
BUFFER_ZMM3_4     = TEXT_PER_REG * 44
BUFFER_ZMM3_5     = TEXT_PER_REG * 45
BUFFER_ZMM3_6     = TEXT_PER_REG * 46
BUFFER_ZMM3_7     = TEXT_PER_REG * 47
BUFFER_ZMM4_0     = TEXT_PER_REG * 48
BUFFER_ZMM4_1     = TEXT_PER_REG * 49
BUFFER_ZMM4_2     = TEXT_PER_REG * 50
BUFFER_ZMM4_3     = TEXT_PER_REG * 51
BUFFER_ZMM4_4     = TEXT_PER_REG * 52
BUFFER_ZMM4_5     = TEXT_PER_REG * 53
BUFFER_ZMM4_6     = TEXT_PER_REG * 54
BUFFER_ZMM4_7     = TEXT_PER_REG * 55
BUFFER_ZMM5_0     = TEXT_PER_REG * 56
BUFFER_ZMM5_1     = TEXT_PER_REG * 57
BUFFER_ZMM5_2     = TEXT_PER_REG * 58
BUFFER_ZMM5_3     = TEXT_PER_REG * 59
BUFFER_ZMM5_4     = TEXT_PER_REG * 60
BUFFER_ZMM5_5     = TEXT_PER_REG * 61
BUFFER_ZMM5_6     = TEXT_PER_REG * 62
BUFFER_ZMM5_7     = TEXT_PER_REG * 63
BUFFER_ZMM6_0     = TEXT_PER_REG * 64
BUFFER_ZMM6_1     = TEXT_PER_REG * 65
BUFFER_ZMM6_2     = TEXT_PER_REG * 66
BUFFER_ZMM6_3     = TEXT_PER_REG * 67
BUFFER_ZMM6_4     = TEXT_PER_REG * 68
BUFFER_ZMM6_5     = TEXT_PER_REG * 69
BUFFER_ZMM6_6     = TEXT_PER_REG * 70
BUFFER_ZMM6_7     = TEXT_PER_REG * 71
BUFFER_ZMM7_0     = TEXT_PER_REG * 72
BUFFER_ZMM7_1     = TEXT_PER_REG * 73
BUFFER_ZMM7_2     = TEXT_PER_REG * 74
BUFFER_ZMM7_3     = TEXT_PER_REG * 75
BUFFER_ZMM7_4     = TEXT_PER_REG * 76
BUFFER_ZMM7_5     = TEXT_PER_REG * 77
BUFFER_ZMM7_6     = TEXT_PER_REG * 78
BUFFER_ZMM7_7     = TEXT_PER_REG * 79
BUFFER_K0         = TEXT_PER_REG * 80
BUFFER_K1         = TEXT_PER_REG * 81
BUFFER_K2         = TEXT_PER_REG * 82
BUFFER_K3         = TEXT_PER_REG * 83
BUFFER_K4         = TEXT_PER_REG * 84
BUFFER_K5         = TEXT_PER_REG * 85
BUFFER_K6         = TEXT_PER_REG * 86
BUFFER_K7         = TEXT_PER_REG * 87
BUFFER_N_MM0      = TEXT_PER_REG * 88
BUFFER_N_MM1      = BUFFER_N_MM0 + TEXT_PER_MM * 1 
BUFFER_N_MM2      = BUFFER_N_MM0 + TEXT_PER_MM * 2
BUFFER_N_MM3      = BUFFER_N_MM0 + TEXT_PER_MM * 3
BUFFER_N_MM4      = BUFFER_N_MM0 + TEXT_PER_MM * 4
BUFFER_N_MM5      = BUFFER_N_MM0 + TEXT_PER_MM * 5
BUFFER_N_MM6      = BUFFER_N_MM0 + TEXT_PER_MM * 6
BUFFER_N_MM7      = BUFFER_N_MM0 + TEXT_PER_MM * 7  
BUFFER_N_ZMM0     = BUFFER_N_MM0 + TEXT_PER_MM * 8 
BUFFER_N_ZMM1     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 1
BUFFER_N_ZMM2     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 2
BUFFER_N_ZMM3     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 3
BUFFER_N_ZMM4     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 4
BUFFER_N_ZMM5     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 5
BUFFER_N_ZMM6     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 6
BUFFER_N_ZMM7     = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 7
BUFFER_N_K0       = BUFFER_N_ZMM0 + TEXT_PER_ZMM * 8
BUFFER_N_K1       = BUFFER_N_K0 + TEXT_PER_K * 1
BUFFER_N_K2       = BUFFER_N_K0 + TEXT_PER_K * 2
BUFFER_N_K3       = BUFFER_N_K0 + TEXT_PER_K * 3
BUFFER_N_K4       = BUFFER_N_K0 + TEXT_PER_K * 4
BUFFER_N_K5       = BUFFER_N_K0 + TEXT_PER_K * 5
BUFFER_N_K6       = BUFFER_N_K0 + TEXT_PER_K * 6
BUFFER_N_K7       = BUFFER_N_K0 + TEXT_PER_K * 7
BIND_APP_GUI      = 0
X_SIZE            = 770
Y_SIZE            = 242
COUNT_GPR         = 8
COUNT_MMX         = 8
COUNT_AVX512      = 8
COUNT_K           = 8
COUNT_VECTOR      = 8
TEXT_PER_REG      = 17
TEXT_PER_MM       = 4
TEXT_PER_ZMM      = 6
TEXT_PER_K        = 3
ZMM_BUFFER_SIZE   = 512
INFO_BUFFER_SIZE  = 8192
MISC_BUFFER_SIZE  = 8192
macro BIND_STOP
{ DB  0 }
MACRO BIND_STRING srcid, dstid
{ DD 01h + (srcid) SHL 6 + (dstid) SHL 19 }
MACRO BIND_INFO srcid, dstid
{ DD 02h + (srcid) SHL 6 + (dstid) SHL 19 }
MACRO BIND_BOOL srcid, srcbit, dstid
{ DD 03h + (srcid) SHL 9 + (srcbit) SHL 6 + (dstid) SHL 19 }
COMBO_STOP_ON  = 0
COMBO_STOP_OFF = 1
COMBO_CURRENT  = 2
COMBO_ADD      = 3
COMBO_INACTIVE = 4
MACRO BIND_COMBO srcid, dstid
{ DD 04h + (srcid) SHL 6 + (dstid) SHL 19 }

format PE GUI 4.0
entry start
section '.code' code readable executable
start:

;---------- Initialization ----------------------------------------------------;

cld
push AppControl
call [InitCommonControlsEx]
test eax,eax
jz .guifailed
push 0
call [GetModuleHandle]
test eax,eax
jz .guifailed
mov [HandleThis],eax
push ID_EXE_ICONS
push eax 
call [LoadIcon]
test eax,eax
jz .guifailed
mov [HandleIcon],eax
push RT_RCDATA
push ID_GUI_STRINGS
push [HandleThis]
call [FindResource]                
test eax,eax
jz .guifailed 
push eax
push [HandleThis]
call [LoadResource] 
test eax,eax
jz .guifailed
push eax
call [LockResource]  
test eax,eax
jz .guifailed
mov [LockedStrings],eax
push RT_RCDATA
push ID_GUI_BINDERS
push [HandleThis]
call [FindResource]                
test eax,eax
jz .guifailed
push eax
push [HandleThis]
call [LoadResource] 
test eax,eax
jz .guifailed
push eax
call [LockResource]  
test eax,eax
jz .guifailed
mov [LockedBinders],eax

;---------- Check required CPU and OS features presence -----------------------;

mov ebx,21
pushf
pop eax
bts eax,ebx
push eax
popf
pushf
pop eax
btr eax,ebx
jnc .cpuFailed
push eax
popf
pushf
pop eax
btr eax,ebx
jc .cpuFailed
xor eax,eax
cpuid
cmp eax,7
jb .cpuFailed
mov eax,1
cpuid
mov eax,06800001h
and edx,eax
cmp edx,eax
jne .cpuFailed
mov eax,18000000h
and ecx,eax
cmp ecx,eax
jne .cpuFailed 
mov eax,7
xor ecx,ecx
cpuid
bt ebx,16
jnc .cpuFailed 
bt ebx,30
setc [Predicates64]
xor ecx,ecx
xgetbv
and al,11100110b
cmp al,11100110b
jne .osFailed

;---------- Code pattern for debug example ------------------------------------;

; Clear general purpose registers (GPR)
xor eax,eax
xor ebx,ebx
xor ecx,ecx
xor edx,edx
xor esi,esi
xor edi,edi
xor ebp,ebp

; Clear MMX registers
pxor mm0,mm0
pxor mm1,mm1
pxor mm2,mm2
pxor mm3,mm3
pxor mm4,mm4
pxor mm5,mm5
pxor mm6,mm6
pxor mm7,mm7

; Clear AVX512 predicate registers
kxorw k0,k0,k0
kxorw k1,k1,k1
kxorw k2,k2,k2
kxorw k3,k3,k3
kxorw k4,k4,k4
kxorw k5,k5,k5
kxorw k6,k6,k6
kxorw k7,k7,k7

; Clear AVX512 vector registers
; ZMM0-ZMM7 actual at 32-bit context, ZMM8-ZMM31 accessible at x64 only
vzeroall

; Generate patterns and load to ZMM registers
; Assume MISC_BUFFER aligned by 64
lea ebx,[MISC_BUFFER]
cld
mov edi,ebx
mov ecx,16
mov eax,11111111h
rep stosd
mov ecx,16
mov eax,22222222h
rep stosd
xor ecx,ecx
@@:
mov eax,ecx
stosd
xor eax,eax
stosd
inc ecx
cmp ecx,8
jb @b
vmovapd zmm0,[ebx + 00]
vmovapd zmm1,[ebx + 64]
vmovapd zmm7,[ebx + 128]
; Load predicate mask
mov eax,00005555h
kmovw k1,eax
; Load initial values
vmovapd zmm4,zmm0
vmovapd zmm5,zmm0
; Example predicate masking with save masked operands
vmovapd zmm4{k1},zmm1
; Example predicate masking with clear masked operands 
vmovapd zmm5{k1}{z},zmm1

;---------- Dump registers ----------------------------------------------------;

push edi esi ebp
lea ebp,[esp + 4*3] 
push ebp edx ecx ebx eax 
lea edi,[INFO_BUFFER]
mov ecx,COUNT_GPR
.hexDump:
pop eax
call HexPrint32
mov al,0
stosb
add edi,TEXT_PER_REG - 9
loop .hexDump
mov ecx,COUNT_MMX
sub esp,64
movq qword [esp + 8*0],mm0
movq qword [esp + 8*1],mm1
movq qword [esp + 8*2],mm2
movq qword [esp + 8*3],mm3
movq qword [esp + 8*4],mm4
movq qword [esp + 8*5],mm5
movq qword [esp + 8*6],mm6
movq qword [esp + 8*7],mm7
.mmxDump:
pop eax edx
call HexPrint64
mov al,0
stosb
loop .mmxDump
mov cl,COUNT_AVX512
lea ebx,[ZMM_BUFFER]
vmovupd [ebx + 64*00],zmm0
vmovupd [ebx + 64*01],zmm1
vmovupd [ebx + 64*02],zmm2
vmovupd [ebx + 64*03],zmm3
vmovupd [ebx + 64*04],zmm4
vmovupd [ebx + 64*05],zmm5
vmovupd [ebx + 64*06],zmm6
vmovupd [ebx + 64*07],zmm7
.avx512dump:
mov bp,COUNT_VECTOR
.vectorDump:
mov eax,[ebx + 0]
mov edx,[ebx + 4]
add ebx,8
call HexPrint64
mov al,0
stosb
dec bp
jnz .vectorDump
loop .avx512dump
mov cl,COUNT_K
sub esp,64
cmp [Predicates64],0
je .kMode16
kmovq [esp + 8*0],k0
kmovq [esp + 8*1],k1
kmovq [esp + 8*2],k2
kmovq [esp + 8*3],k3
kmovq [esp + 8*4],k4
kmovq [esp + 8*5],k5
kmovq [esp + 8*6],k6
kmovq [esp + 8*7],k7
.kDump64:
pop eax edx
call HexPrint64
mov al,0
stosb
loop .kDump64
jmp .kDone
.kMode16:
kmovw [esp + 8*0],k0
kmovw [esp + 8*1],k1
kmovw [esp + 8*2],k2
kmovw [esp + 8*3],k3
kmovw [esp + 8*4],k4
kmovw [esp + 8*5],k5
kmovw [esp + 8*6],k6
kmovw [esp + 8*7],k7
.kDump16:
pop eax edx
call HexPrint16
mov al,0
stosb
add edi,TEXT_PER_REG - 5
loop .kDump16
.kDone:
mov ax,STRING_MM
call IndexString
xor ecx,ecx
.mmxNames:
push esi
call StringWrite
pop esi
movzx ax,cl
or al,30h
stosw
inc ecx
cmp ecx,COUNT_MMX
jb .mmxNames
mov ax,STRING_ZMM
call IndexString
xor ecx,ecx
.avx512names:
push esi edi
call StringWrite
movzx eax,cl
mov bl,0
call DecimalPrint32
mov al,0
stosb
pop edi esi
add edi,TEXT_PER_ZMM
inc ecx
cmp ecx,COUNT_AVX512
jb .avx512names
mov ax,STRING_K
call IndexString
xor ecx,ecx
.kNames:
push esi
call StringWrite
pop esi
movzx ax,cl
or al,30h
stosw
inc ecx
cmp ecx,COUNT_K
jb .kNames
emms

;---------- Show dialogue window, wait user events, exit ----------------------;

push 0 0 
push DialogProc
push HWND_DESKTOP
push ID_MAIN
push [HandleThis]  
call [DialogBoxParam] 
test eax,eax
jz .guifailed 
cmp eax,-1
je .guifailed
.ok:
push 0           
call [ExitProcess]
.guifailed:
push MB_ICONERROR
push 0
push MsgErrorGUI 
push 0
call [MessageBox]  
push 1           
call [ExitProcess]
.osFailed:
lea eax,[MsgErrorOS]
jmp .failed
.cpuFailed:
lea eax,[MsgErrorCPU]
.failed:
push MB_ICONERROR
push 0
push eax 
push 0
call [MessageBox]  
push 2           
call [ExitProcess]

;---------- Callback procedure for dialogue window ----------------------------;

DialogProc:
push ebp ebx esi edi
mov ebp,esp
mov eax,[ebp + 24]
cmp eax,WM_INITDIALOG
je .wminitdialog 
cmp eax,WM_COMMAND
je .wmcommand
cmp eax,WM_CLOSE
je .wmclose
xor eax,eax
jmp .finish
.wminitdialog:
mov ebx,[ebp + 20]
mov ax,BIND_APP_GUI
call Binder
push [HandleIcon] 
push ICON_SMALL 
push WM_SETICON 
push dword [ebp + 20]
call [SendMessage]
mov ax,STRING_APP
call IndexString
push esi
push dword [ebp + 20]
call [SetWindowText]
jmp .processed
.wmcommand:
jmp .processed
.wmclose:
push 1
push dword [ebp + 20]
call [EndDialog]
.processed:
mov eax,1
.finish:
mov esp,ebp
pop edi esi ebx ebp
ret 16

;---------- Helpers subroutines -----------------------------------------------;

StringWrite:
cld
@@:
lodsb
cmp al,0
je @f
stosb
jmp @b
@@:
ret

IndexString:
cld
mov esi,[LockedStrings]
movzx ecx,ax
jecxz .stop
.cycle:
lodsb
cmp al,0
jne .cycle
loop .cycle
.stop:
ret

Binder:
cld
mov esi,[LockedBinders]
movzx ecx,ax
jecxz .foundBinder
.findBinder:
lodsb
add esi,3
test al,00111111b
jnz .findBinder
sub esi,3
loop .findBinder
.foundBinder:
lodsd
mov edx,eax
mov ecx,eax
shr eax,6
and eax,00001FFFh
shr edx,6+13
and edx,00001FFFh
and ecx,00111111b
push esi
call [ProcBinders + ecx * 4 - 4]
pop esi
cmp byte [esi],0
jne .foundBinder
ret
BindString:
call IndexString
BindEntry:
push edx
push ebx  
call [GetDlgItem]
test eax,eax
jz BindExit
push esi
push 0
push WM_SETTEXT
push eax 
call [SendMessage]
BindExit:
ret
BindInfo:
lea esi,[INFO_BUFFER + eax]
jmp BindEntry
BindBool:
mov ecx,eax
shr eax,3
and ecx,0111b
movzx eax,byte [INFO_BUFFER + eax]
bt eax,ecx
setc al
xchg esi,eax
push edx
push ebx  
call [GetDlgItem]
test eax,eax
jz .error
push esi
push eax 
call [EnableWindow]
.error:
jmp BindExit
BindCombo:
lea esi,[INFO_BUFFER + eax]
push edx 
push ebx  
call [GetDlgItem]
test eax,eax
jz .stop
xchg edi,eax
mov ebp,0FFFF0000h
.tagCombo:
lodsb 
movzx eax,al
call [ProcCombo + eax * 4]
inc ebp
jnc .tagCombo
shr ebp,16
cmp bp,0FFFFh
je .stop
push 0 
push ebp 
push CB_SETCURSEL
push edi 
call [SendMessage]
.stop:
ret
BindComboStopOn:
stc
ret
BindComboStopOff: 
stc
ret
BindComboCurrent:
call HelperBindCombo
shl ebp,16
clc
ret
BindComboAdd:
call HelperBindCombo
clc
ret
BindComboInactive:
clc
ret
HelperBindCombo:
lodsw
push esi
movzx eax,ax
call IndexString
push esi
push 0
push CB_ADDSTRING
push edi 
call [SendMessage]
pop esi
ret

DecimalPrint32:
cld
push eax ebx ecx edx
mov bh,80h-10
add bh,bl
mov ecx,1000000000
.mainCycle:
xor edx,edx
div ecx
and al,0Fh
test bh,bh
js .firstZero
cmp ecx,1
je .firstZero
cmp al,0
jz .skipZero
.firstZero:
mov bh,80h
or al,30h
stosb
.skipZero:
push edx
xor edx,edx
mov eax,ecx
mov ecx,10
div ecx
mov ecx,eax 
pop eax
inc bh
test ecx,ecx
jnz .mainCycle 
pop edx ecx ebx eax
ret

HexPrint64:
xchg eax,edx
call HexPrint32
xchg eax,edx
HexPrint32:
push eax
ror eax,16
call HexPrint16
pop eax
HexPrint16:
push eax
xchg al,ah
call HexPrint8
pop eax
HexPrint8:
push eax
ror al,4
call HexPrint4
pop eax
HexPrint4:
cld
push eax
and al,0Fh
add al,90h
daa
adc al,40h
daa
stosb
pop eax
ret

DoublePrint:
pushad
cld
test eax,eax
jnz @f
mov ecx,07FFFFFFFh
and ecx,edx
jz .fp64_Zero
cmp ecx,07FF80000h
je .fp64_QNAN
cmp ecx,07FF00000h
je .fp64_INF
ja .fp64_NAN
@@:
finit
push edx eax
push eax
fstcw [esp]
pop eax
or ax,0C00h
push eax
fldcw [esp]
pop eax
fld qword [esp]
pop eax edx
fld st0
frndint
fxch
fsub st0,st1
mov eax,1
movzx ecx,bh
jecxz .divisorDone
@@:
imul eax,eax,10
loop @b
.divisorDone:
push eax
fimul dword [esp]
pop eax
sub esp,32
fbstp [esp + 00]
fbstp [esp + 16]
test byte [esp + 16 + 09],80h
setnz dl
test byte [esp + 00 + 09],80h
setnz dh
test dx,dx
jz @f
mov al,'-'
stosb
@@:
mov cx,20 
mov edx,[esp + 16 + 06]  
mov esi,[esp + 16 + 02] 
mov ebp,[esp + 16 + 00] 
shl ebp,16
and edx,07FFFFFFFh
.cycleInteger:
mov eax,edx
shr eax,28
cmp cl,1
je .store
cmp cl,bl
jbe .store
test ch,ch
jnz .store
test al,al
jz .position 
.store:
mov ch,1
or al,30h
stosb
.position:
shld edx,esi,4
shld esi,ebp,4
shl ebp,4
dec cl
jnz .cycleInteger
test bh,bh
jz .exit
mov al,'.'
stosb
std 
movzx ecx,bh     
lea edi,[edi + ecx]
mov edx,[esp + 00 + 00]  
mov esi,[esp + 00 + 04] 
mov ebp,[esp + 00 + 00] 
push edi
dec edi
.cycleFloat:
mov al,dl
and al,0Fh
or al,30h
stosb
shrd edx,esi,4
shrd esi,ebp,4
shr ebp,4
loop .cycleFloat
pop edi
cld
add esp,32
jmp .exit
.fp64_Zero:
mov eax,'0.0 '
jmp .fp64special
.fp64_INF:
mov eax,'INF '
jmp .fp64special
.fp64_NAN:
mov eax,'NAN '
jmp .fp64special
.fp64_QNAN:
mov eax,'QNAN'
.fp64special:
stosd
jmp .exit
.Error:
mov al,'?'
stosb
.exit:
finit
mov [esp],edi
popad
ret

;---------- Data, import, resources and applixation manifest ------------------;

section '.data' data readable writeable
MsgErrorGUI    DB  'GUI initialization failed.',0
MsgErrorCPU    DB  'CPU feature not supported or locked:'           , 0Dh, 0Ah
               DB  'required x87, MMX, SSE2, AVX, AVX512, OSXSAVE.' , 0
MsgErrorOS     DB  'OS feature not supported or locked:'            , 0Dh, 0Ah
               DB  'required ZMM[0-31] and K[0-7] context.'         , 0
AppControl     INITCOMMONCONTROLSEX  8, 0
ProcBinders    DD  BindString
               DD  BindInfo
               DD  BindBool
               DD  BindCombo
ProcCombo      DD  BindComboStopOn
               DD  BindComboStopOff 
               DD  BindComboCurrent
               DD  BindComboAdd
               DD  BindComboInactive
HandleThis     DD  ? 
HandleIcon     DD  ?
LockedStrings  DD  ?
LockedBinders  DD  ?
Predicates64   DB  ?
align 4096 
ZMM_BUFFER     DB  ZMM_BUFFER_SIZE  DUP (?)
INFO_BUFFER    DB  INFO_BUFFER_SIZE DUP (?)
MISC_BUFFER    DB  MISC_BUFFER_SIZE DUP (?)  

section '.idata' import data readable writeable
library kernel32 , 'kernel32.dll', \
        user32   , 'user32.dll'  , \
        comctl32 , 'comctl32.dll'
include 'api\kernel32.inc'
include 'api\user32.inc'
include 'api\comctl32.inc'

section '.rsrc' resource data readable
directory RT_DIALOG     , dialogs   , \
          RT_RCDATA     , raws      , \ 
          RT_ICON       , icons     , \
          RT_GROUP_ICON , gicons    , \
          RT_MANIFEST   , manifests
resource dialogs, ID_MAIN, LANG_ENGLISH + SUBLANG_DEFAULT, mydialog
dialog mydialog, '', 0, 0, X_SIZE, Y_SIZE, DS_CENTER + WS_CAPTION + WS_SYSMENU + WS_SIZEBOX, 0, 0, 'Verdana monospace', 8
dialogitem 'STATIC', '', IDR_EAX_NAME      ,  5,   9,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EBX_NAME      ,  5,  18,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ECX_NAME      ,  5,  27,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EDX_NAME      ,  5,  36,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ESP_NAME      ,  5,  45,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EBP_NAME      ,  5,  54,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ESI_NAME      ,  5,  63,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EDI_NAME      ,  5,  72,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM0_NAME      ,  5,  86,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM1_NAME      ,  5,  95,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM2_NAME      ,  5, 104,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM3_NAME      ,  5, 113,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM4_NAME      ,  5, 122,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM5_NAME      ,  5, 131,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM6_NAME      ,  5, 140,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM7_NAME      ,  5, 149,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K0_NAME       ,   5, 163,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K1_NAME       ,   5, 172,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K2_NAME       ,   5, 181,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K3_NAME       ,   5, 190,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K4_NAME       ,   5, 199,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K5_NAME       ,   5, 208,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K6_NAME       ,   5, 217,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K7_NAME       ,   5, 226,  28,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EAX_VALUE     ,  34,   9,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EBX_VALUE     ,  34,  18,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ECX_VALUE     ,  34,  27,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EDX_VALUE     ,  34,  36,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ESP_VALUE     ,  34,  45,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EBP_VALUE     ,  34,  54,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ESI_VALUE     ,  34,  63,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_EDI_VALUE     ,  34,  72,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM0_VALUE     ,  34,  86,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM1_VALUE     ,  34,  95,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM2_VALUE     ,  34, 104,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM3_VALUE     ,  34, 113,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM4_VALUE     ,  34, 122,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM5_VALUE     ,  34, 131,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM6_VALUE     ,  34, 140,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_MM7_VALUE     ,  34, 149,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K0_VALUE      ,  34, 163,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K1_VALUE      ,  34, 172,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K2_VALUE      ,  34, 181,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K3_VALUE      ,  34, 190,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K4_VALUE      ,  34, 199,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K5_VALUE      ,  34, 208,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K6_VALUE      ,  34, 217,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_K7_VALUE      ,  34, 226,  82,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_NAME     , 122,   9,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_NAME     , 122,  18,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_NAME     , 122,  27,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_NAME     , 122,  36,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_NAME     , 122,  45,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_NAME     , 122,  54,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_NAME     , 122,  63,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_NAME     , 122,  72,  37,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_0_VALUE  , 689,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_1_VALUE  , 614,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_2_VALUE  , 539,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_3_VALUE  , 464,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_4_VALUE  , 386,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_5_VALUE  , 311,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_6_VALUE  , 236,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM0_7_VALUE  , 161,   9,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE

dialogitem 'STATIC', '', IDR_ZMM1_0_VALUE  , 689,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_1_VALUE  , 614,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_2_VALUE  , 539,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_3_VALUE  , 464,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_4_VALUE  , 386,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_5_VALUE  , 311,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_6_VALUE  , 236,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM1_7_VALUE  , 161,  18,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE

dialogitem 'STATIC', '', IDR_ZMM2_0_VALUE  , 689,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_1_VALUE  , 614,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_2_VALUE  , 539,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_3_VALUE  , 464,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_4_VALUE  , 386,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_5_VALUE  , 311,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_6_VALUE  , 236,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM2_7_VALUE  , 161,  27,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_0_VALUE  , 689,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_1_VALUE  , 614,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_2_VALUE  , 539,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_3_VALUE  , 464,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_4_VALUE  , 386,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_5_VALUE  , 311,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_6_VALUE  , 236,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM3_7_VALUE  , 161,  36,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_0_VALUE  , 689,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_1_VALUE  , 614,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_2_VALUE  , 539,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_3_VALUE  , 464,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_4_VALUE  , 386,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_5_VALUE  , 311,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_6_VALUE  , 236,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM4_7_VALUE  , 161,  45,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_0_VALUE  , 689,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_1_VALUE  , 614,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_2_VALUE  , 539,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_3_VALUE  , 464,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_4_VALUE  , 386,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_5_VALUE  , 311,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_6_VALUE  , 236,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM5_7_VALUE  , 161,  54,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_0_VALUE  , 689,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_1_VALUE  , 614,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_2_VALUE  , 539,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_3_VALUE  , 464,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_4_VALUE  , 386,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_5_VALUE  , 311,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_6_VALUE  , 236,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM6_7_VALUE  , 161,  63,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_0_VALUE  , 689,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_1_VALUE  , 614,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_2_VALUE  , 539,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_3_VALUE  , 464,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_4_VALUE  , 386,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_5_VALUE  , 311,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_6_VALUE  , 236,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE
dialogitem 'STATIC', '', IDR_ZMM7_7_VALUE  , 161,  72,  74,  8, WS_VISIBLE + SS_SUNKEN + SS_CENTER + SS_CENTERIMAGE

enddialog
resource raws, ID_GUI_STRINGS, LANG_ENGLISH + SUBLANG_DEFAULT, guistrings, \
               ID_GUI_BINDERS, LANG_ENGLISH + SUBLANG_DEFAULT, guibinders
resdata guistrings
DB  'GPR32, MMX and AVX512 as hex (ia32 v0.01)', 0
DB  'EAX', 0
DB  'EBX', 0
DB  'ECX', 0
DB  'EDX', 0
DB  'ESP', 0
DB  'EBP', 0
DB  'ESI', 0
DB  'EDI', 0
DB  'MM' , 0
DB  'ZMM', 0
DB  'K'  , 0
endres
resdata guibinders
BIND_STRING  STRING_EAX     , IDR_EAX_NAME
BIND_STRING  STRING_EBX     , IDR_EBX_NAME
BIND_STRING  STRING_ECX     , IDR_ECX_NAME
BIND_STRING  STRING_EDX     , IDR_EDX_NAME
BIND_STRING  STRING_ESP     , IDR_ESP_NAME
BIND_STRING  STRING_EBP     , IDR_EBP_NAME
BIND_STRING  STRING_ESI     , IDR_ESI_NAME
BIND_STRING  STRING_EDI     , IDR_EDI_NAME
BIND_INFO    BUFFER_N_MM0   , IDR_MM0_NAME
BIND_INFO    BUFFER_N_MM1   , IDR_MM1_NAME
BIND_INFO    BUFFER_N_MM2   , IDR_MM2_NAME
BIND_INFO    BUFFER_N_MM3   , IDR_MM3_NAME
BIND_INFO    BUFFER_N_MM4   , IDR_MM4_NAME
BIND_INFO    BUFFER_N_MM5   , IDR_MM5_NAME
BIND_INFO    BUFFER_N_MM6   , IDR_MM6_NAME
BIND_INFO    BUFFER_N_MM7   , IDR_MM7_NAME
BIND_INFO    BUFFER_N_ZMM0  , IDR_ZMM0_NAME
BIND_INFO    BUFFER_N_ZMM1  , IDR_ZMM1_NAME
BIND_INFO    BUFFER_N_ZMM2  , IDR_ZMM2_NAME
BIND_INFO    BUFFER_N_ZMM3  , IDR_ZMM3_NAME
BIND_INFO    BUFFER_N_ZMM4  , IDR_ZMM4_NAME
BIND_INFO    BUFFER_N_ZMM5  , IDR_ZMM5_NAME
BIND_INFO    BUFFER_N_ZMM6  , IDR_ZMM6_NAME
BIND_INFO    BUFFER_N_ZMM7  , IDR_ZMM7_NAME
BIND_INFO    BUFFER_N_K0    , IDR_K0_NAME
BIND_INFO    BUFFER_N_K1    , IDR_K1_NAME
BIND_INFO    BUFFER_N_K2    , IDR_K2_NAME
BIND_INFO    BUFFER_N_K3    , IDR_K3_NAME
BIND_INFO    BUFFER_N_K4    , IDR_K4_NAME
BIND_INFO    BUFFER_N_K5    , IDR_K5_NAME
BIND_INFO    BUFFER_N_K6    , IDR_K6_NAME
BIND_INFO    BUFFER_N_K7    , IDR_K7_NAME
BIND_INFO    BUFFER_EAX     , IDR_EAX_VALUE
BIND_INFO    BUFFER_EBX     , IDR_EBX_VALUE
BIND_INFO    BUFFER_ECX     , IDR_ECX_VALUE
BIND_INFO    BUFFER_EDX     , IDR_EDX_VALUE
BIND_INFO    BUFFER_ESP     , IDR_ESP_VALUE
BIND_INFO    BUFFER_EBP     , IDR_EBP_VALUE
BIND_INFO    BUFFER_ESI     , IDR_ESI_VALUE
BIND_INFO    BUFFER_EDI     , IDR_EDI_VALUE
BIND_INFO    BUFFER_MM0     , IDR_MM0_VALUE
BIND_INFO    BUFFER_MM1     , IDR_MM1_VALUE
BIND_INFO    BUFFER_MM2     , IDR_MM2_VALUE
BIND_INFO    BUFFER_MM3     , IDR_MM3_VALUE
BIND_INFO    BUFFER_MM4     , IDR_MM4_VALUE
BIND_INFO    BUFFER_MM5     , IDR_MM5_VALUE
BIND_INFO    BUFFER_MM6     , IDR_MM6_VALUE
BIND_INFO    BUFFER_MM7     , IDR_MM7_VALUE
BIND_INFO    BUFFER_ZMM0_0  , IDR_ZMM0_0_VALUE
BIND_INFO    BUFFER_ZMM0_1  , IDR_ZMM0_1_VALUE
BIND_INFO    BUFFER_ZMM0_2  , IDR_ZMM0_2_VALUE
BIND_INFO    BUFFER_ZMM0_3  , IDR_ZMM0_3_VALUE
BIND_INFO    BUFFER_ZMM0_4  , IDR_ZMM0_4_VALUE
BIND_INFO    BUFFER_ZMM0_5  , IDR_ZMM0_5_VALUE
BIND_INFO    BUFFER_ZMM0_6  , IDR_ZMM0_6_VALUE
BIND_INFO    BUFFER_ZMM0_7  , IDR_ZMM0_7_VALUE
BIND_INFO    BUFFER_ZMM1_0  , IDR_ZMM1_0_VALUE
BIND_INFO    BUFFER_ZMM1_1  , IDR_ZMM1_1_VALUE
BIND_INFO    BUFFER_ZMM1_2  , IDR_ZMM1_2_VALUE
BIND_INFO    BUFFER_ZMM1_3  , IDR_ZMM1_3_VALUE
BIND_INFO    BUFFER_ZMM1_4  , IDR_ZMM1_4_VALUE
BIND_INFO    BUFFER_ZMM1_5  , IDR_ZMM1_5_VALUE
BIND_INFO    BUFFER_ZMM1_6  , IDR_ZMM1_6_VALUE
BIND_INFO    BUFFER_ZMM1_7  , IDR_ZMM1_7_VALUE
BIND_INFO    BUFFER_ZMM2_0  , IDR_ZMM2_0_VALUE
BIND_INFO    BUFFER_ZMM2_1  , IDR_ZMM2_1_VALUE
BIND_INFO    BUFFER_ZMM2_2  , IDR_ZMM2_2_VALUE
BIND_INFO    BUFFER_ZMM2_3  , IDR_ZMM2_3_VALUE
BIND_INFO    BUFFER_ZMM2_4  , IDR_ZMM2_4_VALUE
BIND_INFO    BUFFER_ZMM2_5  , IDR_ZMM2_5_VALUE
BIND_INFO    BUFFER_ZMM2_6  , IDR_ZMM2_6_VALUE
BIND_INFO    BUFFER_ZMM2_7  , IDR_ZMM2_7_VALUE
BIND_INFO    BUFFER_ZMM3_0  , IDR_ZMM3_0_VALUE
BIND_INFO    BUFFER_ZMM3_1  , IDR_ZMM3_1_VALUE
BIND_INFO    BUFFER_ZMM3_2  , IDR_ZMM3_2_VALUE
BIND_INFO    BUFFER_ZMM3_3  , IDR_ZMM3_3_VALUE
BIND_INFO    BUFFER_ZMM3_4  , IDR_ZMM3_4_VALUE
BIND_INFO    BUFFER_ZMM3_5  , IDR_ZMM3_5_VALUE
BIND_INFO    BUFFER_ZMM3_6  , IDR_ZMM3_6_VALUE
BIND_INFO    BUFFER_ZMM3_7  , IDR_ZMM3_7_VALUE
BIND_INFO    BUFFER_ZMM4_0  , IDR_ZMM4_0_VALUE
BIND_INFO    BUFFER_ZMM4_1  , IDR_ZMM4_1_VALUE
BIND_INFO    BUFFER_ZMM4_2  , IDR_ZMM4_2_VALUE
BIND_INFO    BUFFER_ZMM4_3  , IDR_ZMM4_3_VALUE
BIND_INFO    BUFFER_ZMM4_4  , IDR_ZMM4_4_VALUE
BIND_INFO    BUFFER_ZMM4_5  , IDR_ZMM4_5_VALUE
BIND_INFO    BUFFER_ZMM4_6  , IDR_ZMM4_6_VALUE
BIND_INFO    BUFFER_ZMM4_7  , IDR_ZMM4_7_VALUE
BIND_INFO    BUFFER_ZMM5_0  , IDR_ZMM5_0_VALUE
BIND_INFO    BUFFER_ZMM5_1  , IDR_ZMM5_1_VALUE
BIND_INFO    BUFFER_ZMM5_2  , IDR_ZMM5_2_VALUE
BIND_INFO    BUFFER_ZMM5_3  , IDR_ZMM5_3_VALUE
BIND_INFO    BUFFER_ZMM5_4  , IDR_ZMM5_4_VALUE
BIND_INFO    BUFFER_ZMM5_5  , IDR_ZMM5_5_VALUE
BIND_INFO    BUFFER_ZMM5_6  , IDR_ZMM5_6_VALUE
BIND_INFO    BUFFER_ZMM5_7  , IDR_ZMM5_7_VALUE
BIND_INFO    BUFFER_ZMM6_0  , IDR_ZMM6_0_VALUE
BIND_INFO    BUFFER_ZMM6_1  , IDR_ZMM6_1_VALUE
BIND_INFO    BUFFER_ZMM6_2  , IDR_ZMM6_2_VALUE
BIND_INFO    BUFFER_ZMM6_3  , IDR_ZMM6_3_VALUE
BIND_INFO    BUFFER_ZMM6_4  , IDR_ZMM6_4_VALUE
BIND_INFO    BUFFER_ZMM6_5  , IDR_ZMM6_5_VALUE
BIND_INFO    BUFFER_ZMM6_6  , IDR_ZMM6_6_VALUE
BIND_INFO    BUFFER_ZMM6_7  , IDR_ZMM6_7_VALUE
BIND_INFO    BUFFER_ZMM7_0  , IDR_ZMM7_0_VALUE
BIND_INFO    BUFFER_ZMM7_1  , IDR_ZMM7_1_VALUE
BIND_INFO    BUFFER_ZMM7_2  , IDR_ZMM7_2_VALUE
BIND_INFO    BUFFER_ZMM7_3  , IDR_ZMM7_3_VALUE
BIND_INFO    BUFFER_ZMM7_4  , IDR_ZMM7_4_VALUE
BIND_INFO    BUFFER_ZMM7_5  , IDR_ZMM7_5_VALUE
BIND_INFO    BUFFER_ZMM7_6  , IDR_ZMM7_6_VALUE
BIND_INFO    BUFFER_ZMM7_7  , IDR_ZMM7_7_VALUE
BIND_INFO    BUFFER_K0      , IDR_K0_VALUE
BIND_INFO    BUFFER_K1      , IDR_K1_VALUE
BIND_INFO    BUFFER_K2      , IDR_K2_VALUE
BIND_INFO    BUFFER_K3      , IDR_K3_VALUE
BIND_INFO    BUFFER_K4      , IDR_K4_VALUE
BIND_INFO    BUFFER_K5      , IDR_K5_VALUE
BIND_INFO    BUFFER_K6      , IDR_K6_VALUE
BIND_INFO    BUFFER_K7      , IDR_K7_VALUE
BIND_STOP
endres
resource icons, ID_EXE_ICON, LANG_NEUTRAL, exeicon
resource gicons, ID_EXE_ICONS, LANG_NEUTRAL, exegicon
icon exegicon, exeicon, 'images\fasmicon32.ico'
resource manifests, 1, LANG_NEUTRAL, manifest
resdata manifest
db '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>'
db '<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">'
db '<assemblyIdentity'
db '    name="Shield Icon Demo"'
db '    processorArchitecture="x86"'
db '    version="1.0.0.0"'
db '    type="win32"/>'
db '<description>Shield Icon Demo</description>'
db '<dependency>'
db '    <dependentAssembly>'
db '        <assemblyIdentity'
db '           type="win32"'
db '           name="Microsoft.Windows.Common-Controls"'
db '           version="6.0.0.0"'
db '           processorArchitecture="x86"'
db '           publicKeyToken="6595b64144ccf1df"'
db '           language="*"'
db '        />'
db '     </dependentAssembly>'
db '  </dependency>'
db '</assembly>'
endres

